/**
 * AuthoritativeDefinitionsEditor component for editing authoritative definitions
 * Provides a consistent interface across the application
 *
 * @param {Array} value - Array of authoritative definition objects
 * @param {Function} onChange - Callback when array changes
 */
const AuthoritativeDefinitionsEditor = ({ value = [], onChange }) => {
  const handleAdd = () => {
    const updatedArray = [...value, { type: '', url: '', description: '' }];
    onChange(updatedArray);
  };

  const handleRemove = (index) => {
    const updatedArray = value.filter((_, i) => i !== index);
    onChange(updatedArray.length > 0 ? updatedArray : undefined);
  };

  const handleUpdate = (index, fieldName, fieldValue) => {
    const updatedArray = [...value];
    updatedArray[index] = { ...updatedArray[index], [fieldName]: fieldValue };
    onChange(updatedArray);
  };

  const inputClasses = "w-full rounded border border-gray-300 bg-white px-2 py-1 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-xs";

  return (
    <div>
      <label className="block text-xs font-medium text-gray-700 mb-1">
          <div className="flex flex-row items-center justify-start">
          <div className="size-3">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" ><path d="M3.864 0.471432C2.3028720000000003 0.555408 1.016616 1.589904 0.588504 3.1057680000000003C0.461616 3.555048 0.470232 2.883864 0.46202400000000005 12.96C0.456984 19.155 0.46259999999999996 22.328112 0.47884800000000005 22.464000000000002C0.5450400000000001 23.017704000000002 0.981936 23.45436 1.5370320000000002 23.521608C1.664136 23.536992 2.297976 23.543688 3.205032 23.539224L4.668 23.532 4.8 23.469288C4.959624000000001 23.393472 5.0952 23.261448 5.179248 23.1C5.262528 22.940064 5.268312 22.65408 5.19168 22.485072000000002C5.123136 22.3338 4.983456 22.185144 4.837512 22.108128L4.716 22.044 3.3417600000000003 22.037256000000003L1.9675200000000002 22.030488000000002 1.97376 12.869256000000002L1.98 3.708 2.033856 3.516C2.2359600000000004 2.795568 2.795568 2.2359600000000004 3.516 2.033856L3.708 1.98 8.862 1.973568C11.696712 1.9700399999999998 14.016 1.972944 14.016 1.980048C14.016 1.987152 13.968696 2.087232 13.910856 2.20248C13.790688 2.441976 13.701816 2.707896 13.63932 3.0150240000000004C13.598376000000002 3.216264 13.596 3.499776 13.596 8.16C13.596 12.953232 13.597296 13.095336 13.641744 13.210584C13.69668 13.353024 13.84116 13.515816000000001 13.990608 13.603704C14.089560000000002 13.661856 14.12292 13.668000000000001 14.34 13.668000000000001C14.540351999999999 13.668000000000001 14.596055999999999 13.659408 14.677224 13.615944C14.809920000000002 13.544903999999999 14.952576 13.397328 15.024312000000002 13.256856L15.084 13.14 15.090264 8.958504000000001L15.096528000000001 4.777032 17.178264 4.770504L19.26 4.764 19.362984 4.709016C19.494552000000002 4.638744 19.638744 4.494552 19.709016 4.362984C19.760352 4.26684 19.763904 4.23288 19.762512 3.852C19.759032 2.9015280000000003 19.471872 2.110656 18.892368 1.4555520000000002C18.46536 0.972816 17.955576 0.676968 17.285856000000003 0.523248L17.052 0.46956000000000003 10.524000000000001 0.466944C6.933599999999999 0.46550400000000003 3.9366000000000003 0.46752000000000005 3.864 0.471432M16.5 1.9830240000000001C16.4736 1.988208 16.392599999999998 2.004096 16.32 2.01828C15.786456000000001 2.122608 15.232824 2.679624 15.135504 3.21L15.1212 3.2880000000000003 16.6566 3.2880000000000003C17.501064 3.2880000000000003 18.192 3.2844960000000003 18.192 3.2802000000000002C18.192 3.239832 18.05892 2.898192 18.000504 2.78856C17.83848 2.4846000000000004 17.552304 2.2098720000000003 17.272944000000003 2.090112C17.057760000000002 1.99788 16.686072000000003 1.946376 16.5 1.9830240000000001M3.7280640000000003 4.282056000000001C3.5698800000000004 4.355856 3.41976 4.506048000000001 3.3461760000000003 4.664064000000001C3.257808 4.853832 3.263712 5.10372 3.361128 5.298672C3.445512 5.467512 3.558096 5.575464 3.73368 5.655864L3.857544 5.712552 7.814760000000001 5.706288L11.772 5.7 11.88 5.635968C12.143136 5.479968 12.273792 5.258136 12.273384 4.968C12.272976000000002 4.667784 12.128088 4.433136 11.856 4.292016L11.748000000000001 4.236 7.8 4.23012L3.852 4.22424 3.7280640000000003 4.282056000000001M3.754176 7.081224C3.598728 7.141224 3.42108 7.311192 3.346584 7.471176C3.259848 7.657488000000001 3.2640000000000002 7.905888 3.357096 8.1C3.472872 8.341392 3.6588 8.478744 3.9252960000000003 8.51976C4.039776000000001 8.537376 5.283936 8.543304000000001 7.896 8.53872L11.700000000000001 8.532 11.832 8.469288C12.114 8.335320000000001 12.273912000000001 8.084904 12.274824 7.775856000000001C12.27528 7.627104 12.263808000000001 7.5720719999999995 12.208968 7.460016C12.13608 7.311024 12.01008 7.18392 11.851080000000001 7.099032L11.748000000000001 7.0440000000000005 7.812 7.039104C3.9545760000000003 7.034304000000001 3.873576 7.035144 3.754176 7.081224M3.84 9.862152C3.6433440000000004 9.92316 3.4466639999999997 10.083408 3.351648 10.26C3.3086160000000002 10.339968 3.3000000000000003 10.396080000000001 3.3000000000000003 10.596C3.3000000000000003 10.813080000000001 3.306144 10.84644 3.364296 10.945392C3.4521840000000004 11.094840000000001 3.614976 11.239320000000001 3.757416 11.294256C3.870288 11.337792 3.9633360000000004 11.34 5.688 11.34L7.5 11.34 7.62 11.281032C8.200824 10.995576 8.210064000000001 10.200696 7.635864 9.91872L7.5 9.852 5.7 9.847752C4.71 9.845424 3.873 9.851904 3.84 9.862152M16.26 13.598688C15.857664 13.637376000000001 15.758111999999999 13.674287999999999 14.796000000000001 14.14128L13.956 14.548992 13.843656 14.486040000000001C13.363536 14.217 12.696408000000002 14.155344000000001 12.184104 14.332632C12.103463999999999 14.360544 11.599752 14.570592 11.064744000000001 14.799432000000001L10.092 15.215471999999998 9.984 15.098712C9.74628 14.841696 9.47232 14.669592 9.156 14.578560000000001C9.032232 14.542944 8.862696 14.5356 7.949736 14.526432000000002C6.724056 14.514096 6.625104 14.522832000000001 6.42732 14.660544C6.284208 14.760167999999998 6.157871999999999 14.931336 6.117936 15.079704000000001C6.077472 15.229920000000002 6.09924 15.473232 6.164472 15.6C6.2382480000000005 15.743400000000001 6.38532 15.891863999999998 6.523608 15.962544L6.636 16.02 7.704 16.032C8.291400000000001 16.0386 8.789448 16.052688 8.81076 16.063319999999997C8.903016000000001 16.109328 8.904 16.1358 8.904 18.564C8.904 20.9922 8.903016000000001 21.018672000000002 8.81076 21.064680000000003C8.789448 21.075312 8.291400000000001 21.0894 7.704 21.096C6.6482399999999995 21.107856 6.634704000000001 21.108624 6.52332 21.163512C6.379512 21.234336 6.234336000000001 21.379512000000002 6.163512 21.52332C6.089664 21.673224 6.084024 22.021656 6.153312 22.152C6.244295999999999 22.323144 6.358848 22.436424 6.522168000000001 22.5168L6.683064000000001 22.596 7.811544 22.596C8.674296 22.596 8.973912 22.588344000000003 9.084 22.56348C9.24564 22.526952 9.522096000000001 22.406304000000002 9.662808 22.310856C9.81132 22.210128 10.046568 21.965832000000002 10.154352000000001 21.8004L10.25364 21.648 10.47588 21.648L10.69812 21.648 11.667072 22.383696C12.199968 22.788336 12.6846 23.162064 12.744 23.21424C13.147488000000001 23.568504 13.832568 23.634504 14.294736 23.363664C14.356584000000002 23.327424 14.89428 22.907664 15.4896 22.430880000000002L16.572 21.564 17.894328 21.298128000000002L19.21668 21.032232 19.243560000000002 21.205128000000002C19.280231999999998 21.441072000000002 19.35048 21.617808 19.491336 21.82836C19.722383999999998 22.173816 20.07972 22.435416 20.463504 22.540104000000003C20.638920000000002 22.587936 20.722944000000002 22.592232 21.674904 22.602072000000003C22.965744 22.615416 23.05536 22.604088 23.28276 22.398648C23.477256 22.222920000000002 23.560008 21.980040000000002 23.516808 21.711696C23.479056 21.477287999999998 23.328672 21.281280000000002 23.088 21.152832C23.010576 21.111504 22.91892 21.107064 21.918623999999998 21.096L20.833272 21.084 20.778624 21.029328L20.724 20.974680000000003 20.724 18.561264L20.724 16.147848 20.791344000000002 16.089936L20.858688 16.032 21.888432 16.032C22.8696 16.032 22.92444 16.029672 23.050392 15.982536C23.433648 15.839160000000001 23.635248 15.360816 23.472216 14.981808C23.405112 14.825832000000002 23.211264 14.639688 23.051928 14.578248C22.939632 14.534952000000002 22.860288 14.532 21.804000000000002 14.532C20.549256000000003 14.532 20.521296 14.534712000000003 20.190792000000002 14.688432L19.993584000000002 14.780136000000002 18.582792 14.240832000000001C17.806848 13.944192000000001 17.0856 13.681104000000001 16.98 13.656168C16.784568 13.610015999999998 16.433591999999997 13.582008000000002 16.26 13.598688M16.236 15.129888000000001C16.098912000000002 15.173688 14.403528000000001 16.003704000000003 14.309976 16.072824C14.091072 16.234560000000002 14.113056 16.556784 14.351616000000002 16.683552000000002C14.512632 16.769112 14.489400000000002 16.776 15.624 16.30692C16.399848 15.986184 16.543968 15.936 16.689552000000003 15.936C16.977456 15.936 17.224632 16.093656 17.356416 16.361304C17.423544 16.497672 17.434608 16.54524 17.433336 16.691592C17.430768 16.983864 17.274888 17.232 17.008848 17.367383999999998L16.893696 17.425968 17.225928 17.790984C17.953176 18.589968 18.048792000000002 18.701616 18.129624 18.846144C18.23988 19.043304 18.288 19.23672 18.288 19.482648C18.288 19.662312 18.292392 19.681968 18.330000000000002 19.671096000000002C18.353088 19.664424 18.544800000000002 19.625232 18.756 19.584C18.9672 19.542768000000002 19.158984 19.503552000000003 19.182168 19.496832C19.221936 19.48536 19.223976 19.388904 19.218168 17.79156L19.212 16.09848 17.967216 15.623376000000002C17.282591999999998 15.362088 16.675704 15.136536 16.618608000000002 15.122160000000001C16.485504 15.088632 16.356984 15.091224000000002 16.236 15.129888000000001M12.516 15.8232C12.410400000000001 15.866304000000001 11.894712 16.084512 11.370000000000001 16.30812L10.416 16.714655999999998 10.416 18.435264L10.416 20.155872 10.806000000000001 20.163936C11.17188 20.171496 11.202672000000002 20.175792 11.304 20.233104C11.3634 20.266728 11.912304 20.674872 12.523800000000001 21.140112L13.6356 21.985968 15.1818 20.748863999999998C16.032216000000002 20.068464000000002 16.728 19.505856 16.728 19.498632C16.728 19.491408000000003 16.431048 19.158144 16.068096 18.75804L15.408192000000001 18.0306 15.195216 18.110592C14.585111999999999 18.339768000000003 13.934448 18.254136000000003 13.424760000000001 17.8776C12.772032000000001 17.395416 12.503927999999998 16.588392 12.733896 15.798C12.75408 15.72864 12.745056 15.729672 12.516 15.8232" stroke="none" fill="currentColor" fillRule="evenodd" strokeWidth={0.024} /></svg>
          </div>
          Authoritative Definitions
          </div>
          </label>

      {/* Display existing items */}
      {value.length > 0 && (
        <div className="mb-2 space-y-2">
          {value.map((item, index) => (
            <div key={index} className="space-y-1.5">
              {/* Type, URL, and Remove button in one line (4/7/1 ratio) */}
              <div className="grid grid-cols-12 gap-2 items-end">
                <div className="col-span-4">
                  <label className="block text-xs font-medium text-gray-700 mb-0.5">Type</label>
                  <input
                    type="text"
                    value={item.type || ''}
                    onChange={(e) => handleUpdate(index, 'type', e.target.value)}
                    className={inputClasses}
                    placeholder="e.g., businessDefinition"
                  />
                </div>
                <div className="col-span-7">
                  <label className="block text-xs font-medium text-gray-700 mb-0.5">URL</label>
                  <input
                    type="text"
                    value={item.url || ''}
                    onChange={(e) => handleUpdate(index, 'url', e.target.value)}
                    className={inputClasses}
                    placeholder="https://..."
                  />
                </div>
                <button
                  type="button"
                  onClick={() => handleRemove(index)}
                  className="p-1 text-gray-400 cursor-pointer border border-gray-300 rounded hover:text-red-400 hover:border-red-400 transition-colors justify-self-end"
                  title="Remove"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                  </svg>
                </button>
              </div>

              {/* Description field */}
              <div>
                <label className="block text-xs font-medium text-gray-700 mb-0.5">Description</label>
                <textarea
                  value={item.description || ''}
                  onChange={(e) => handleUpdate(index, 'description', e.target.value)}
                  className={inputClasses}
                  placeholder="Describe the authoritative definition..."
                  rows={2}
                />
              </div>
            </div>
          ))}
        </div>
      )}

      {/* Always show add button */}
      <button
        type="button"
        onClick={handleAdd}
        className="w-full px-2 py-1 border-2 border-dashed border-gray-300 rounded text-xs text-gray-600 hover:border-indigo-400 hover:text-indigo-600"
      >
        + Add
      </button>

      <p className="mt-1 text-xs text-gray-500">Links to authoritative definitions and documentation sources</p>
    </div>
  );
};

export default AuthoritativeDefinitionsEditor;
