{% if datacontract %}
<div class="px-2">
  <div>
    <div class="md:flex md:items-center md:justify-between px-4 sm:px-0">
      <div class="min-w-0 flex-1">
        <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight">
          Data Contract</h2>
        <div class="mt-1 flex flex-col sm:mt-0 sm:flex-row sm:flex-wrap sm:space-x-6">
          {{ datacontract.id }}
        </div>
      </div>
    </div>
  </div>

  <div>
    <div class="space-y-6 mt-6">
      {% if datacontract.info %}
      <section id="information">
        {{ render_partial('partials/datacontract_information.html', datacontract = datacontract) }}
      </section>
      {% endif %}


      {% if datacontract.servers %}
      <section id="servers">
        <div class="px-4 sm:px-0">
          <h1 class="text-base font-semibold leading-6 text-gray-900" id="servers">Servers</h1>
          <p class="text-sm text-gray-500">Servers of the data contract</p>
        </div>

        <ul role="list" class="mt-2 divide-y divide-gray-100 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">

          {% for server_name, server in datacontract.servers %}
            {{ render_partial('partials/server.html', server_name = server_name, server = server) }}
          {% endfor %}

        </ul>

      </section>
      {% endif %}


      {% if datacontract.terms %}
      <section id="terms">
        {{ render_partial('partials/datacontract_terms.html', datacontract = datacontract) }}
      </section>
      {% endif %}


      {% if datacontract.models %}
      <section id="models">
        <div class="flex justify-between">
          <div class="px-4 sm:px-0">
            <h1 class="text-base font-semibold leading-6 text-gray-900">
              Data Model
            </h1>
            <p class="text-sm text-gray-500">The logical data model</p>
          </div>
        </div>

        {% for model_name, model in datacontract.models %}

        <div class="mt-3 flow-root">
          <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
            <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8">
              <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg">

                <table class="min-w-full divide-y divide-gray-300">
                  <thead class="bg-gray-50">
                  <tr>
                    <th scope="colgroup" colspan="3" class="py-2 pl-4 pr-3 text-left font-semibold text-gray-900 sm:pl-6">
                      <span>{{ model_name }}</span>
                      <span class="inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10">{{ model.type }}</span>
                      <div class="text-sm font-medium text-gray-500">{{ model.description }}</div>
                    </th>

                  </tr>
                  </thead>
                  <tbody class="divide-y divide-gray-200 bg-white">
                  {% for field_name, field in model.fields %}
                    {{ render_partial('partials/model_field.html', nested = false, field_name=field_name, field = field, level = 0) }}
                  {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </section>
      {% endif %}

      {% if datacontract.definitions %}
      <section id="definitions">
        <div class="px-4 sm:px-0">
          <h1 class="text-base font-semibold leading-6 text-gray-900">Definitions</h1>
          <p class="text-sm text-gray-500">Domain specific definitions in the data contract</p>
        </div>

        {% for definition_name, definition in datacontract.definitions %}
        {{ render_partial('partials/definition.html', definition_name = definition_name, definition = definition)}}
        {% endfor %}
      </section>
      {% endif %}

      {% if datacontract.examples %}
      <section id="examples">
        <div class="px-4 sm:px-0">
          <h1 class="text-base font-semibold leading-6 text-gray-900">Examples</h1>
          <p class="text-sm text-gray-500">Examples for models in the data contract</p>
        </div>
        {% for example in datacontract.examples %}
          {{ render_partial('partials/example.html', example = example) }}
        {% endfor %}
      </section>
      {% endif %}

      {% if datacontract.servicelevels %}
      <section id="servicelevels">
        {{ render_partial('partials/datacontract_servicelevels.html', datacontract = datacontract ) }}
      </section>
      {% endif %}

      {% if quality_specification %}
        <section id="quality">
          <div class="px-4 sm:px-0">
            <h1 class="text-base font-semibold leading-6 text-gray-900">
              Quality
            </h1>
            <p class="text-sm text-gray-500">
              <span>{{ datacontract.quality.type }}</span>
            </p>
          </div>
          <div class="mt-2 overflow-hidden shadow sm:rounded-lg bg-white">
            <div class="px-4 py-5 sm:px-6">
              <div id="schema-specification" >
                  <pre><code class="text-sm">{{ quality_specification }}</code></pre>
              </div>
            </div>
          </div>
        </section>
      {% endif %}

    </div>
  </div>
</div>
{% endif %}
